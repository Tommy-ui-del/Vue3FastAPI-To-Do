# 任务管理系统（全栈项目）:star:  :moon:
---
## 1. 项目概述
这是一个基于 **FastAPI（后端）+ Vue3（前端）** 实现的轻量级任务管理系统，支持用户注册/登录（含 Google 第三方登录）、任务增删改查、任务优先级排序、自动统计任务完成状态等功能，适合个人日常任务管理使用。
##
----
## 2. 技术栈说明
### 2.1 后端技术栈
- 核心框架：FastAPI（异步高性能，自带 Swagger 接口文档）
- 数据库：SQLite（开发环境）、PostgreSQL（生产环境）
- ORM 工具：SQLAlchemy（异步版本，封装数据库操作）
- 认证方式：JWT 令牌认证 + Google OAuth2 第三方登录
- 数据校验：Pydantic（请求/响应数据校验、序列化）
- 其他工具：passlib（密码哈希）、python-jose（JWT 生成/验证）

### 2.2 前端技术栈
- 核心框架：Vue3（Composition API）
- 状态管理：Pinia
- 路由管理：Vue Router
- 轮播组件：Swiper
- HTTP 请求：Axios
- 样式：原生 CSS + Grid/Flex 布局

##
---
## 3. 项目结构与文件注解
### 3.1 后端文件职责清单
| 文件路径                | 核心作用                                  |
|-------------------------|-------------------------------------------|
| `backend/main.py`       | 应用入口，注册路由、配置跨域、启动时创建数据库表 |
| `backend/config.py`     | 全局配置管理，读取 .env 环境变量（JWT 秘钥、令牌过期时间） |
| `backend/database.py`   | 异步 SQLite 数据库连接配置，提供数据库会话依赖 |
| `backend/models.py`     | ORM 模型定义，封装 User/Task 表结构及通用字段 |
| `backend/schemas.py`    | Pydantic 数据模型，校验请求参数、序列化响应数据 |
| `backend/auth.py`       | JWT 令牌生成/验证，用户登录态校验          |
| `backend/routers/`      | API 路由目录，分 user/task/authentication 模块 |
| `backend/repositories/` | 数据访问层，封装数据库 CRUD 操作，隔离业务逻辑 |

##
---
## Backend 后端部分
### 1. 核心配置文件

**database.py** - 数据库连接管理
- 创建异步数据库引擎和会话
- 提供 FastAPI 依赖注入的数据库会话
- 管理数据库连接生命周期

**config.py** - 全局配置管理
- 使用 Pydantic Settings 管理多环境配置
- 存储 JWT 密钥、数据库连接等敏感信息
- 支持 .env 文件读取配置

### 2. 数据模型层

**models.py** - 数据库表结构定义
- 定义 User 和 Task 表结构
- 实现表关联（User 和 Task 的一对多关系）
- 提供通用字段（创建时间、更新时间、软删除标记）

**schemas.py** - 数据验证和序列化
- 定义请求/响应数据模型
- 校验请求参数合法性
- 序列化响应数据（隐藏敏感字段如密码）

### 3. 数据访问层

**repositories/user_repo.py** - 用户数据操作
- 封装用户相关的 CRUD 操作
- 处理用户认证（密码/Google登录）
- 管理用户创建、查询、更新、删除

**repositories/task_repo.py** - 任务数据操作
- 封装任务相关的 CRUD 操作
- 实现任务批量更新优先级
- 确保用户只能操作自己的任务

### 4. 路由层

**routers/authentication.py** - 认证接口
- 处理用户登录（密码/Google）
- 管理令牌刷新
- 生成访问令牌和刷新令牌

**routers/user.py** - 用户管理接口
- 处理用户注册
- 处理用户删除

**routers/task.py** - 任务管理接口
- 处理任务的增删改查
- 批量更新任务优先级
- 按日期查询任务

##
---
## Frontend 前端部分
### 1. 页面组件

**TheDashboard.vue** - 仪表盘首页
- 展示应用欢迎信息
- 提供演示入口
- 展示应用功能轮播图

**TheDemo.vue** - 演示页面
- 展示任务管理功能
- 实现任务增删改查
- 使用本地存储（演示特性）

**TheRegistration.vue** - 注册页面
- 处理用户注册表单
- 表单验证和错误提示
- 支持 Google 注册

### 2. 布局组件

**TheHeader.vue** - 头部导航
- 显示应用名称
- 根据登录状态显示不同按钮
- 提供页面导航

**TheSpinner.vue** - 加载动画
- 提供加载状态指示
- 用于异步操作等待

**PostIt.vue** - 便签纸容器
- 提供统一的便签纸风格
- 被多个页面复用

##
---
## 文件协作关系
### 1. 数据流向

**前端 → 后端**：
1. 前端页面（如 TheDemo.vue）通过 API 调用后端接口
2. 请求经过路由层（routers/）
3. 路由层调用数据访问层（repositories/）
4. 数据访问层操作数据库（通过 database.py 的会话）

**后端 → 前端**：
1. 数据访问层从数据库获取数据
2. 通过 schemas.py 序列化为响应模型
3. 路由层返回 JSON 响应
4. 前端接收并更新 UI

### 2. 认证流程

1. 用户在 TheRegistration.vue 注册
2. 请求发送到 routers/user.py 的注册接口
3. user_repo.py 创建用户并加密密码
4. 用户在 TheHeader.vue 登录
5. 请求发送到 routers/authentication.py
6. 认证成功后返回 JWT 令牌
7. 前端存储令牌并在后续请求中使用

### 3. 任务管理流程

1. 用户在 TheDemo.vue 操作任务
2. 请求发送到 routers/task.py
3. task_repo.py 执行数据库操作
4. 操作结果通过 schemas.py 序列化返回
5. 前端更新任务列表显示

### 4. 配置共享

- config.py 的配置被多个模块使用
- database.py 的会话被所有路由依赖注入
- schemas.py 的模型被路由层用于数据验证

##
---
## 关键设计模式

1. **分层架构**：路由层 → 数据访问层 → 数据库层
2. **依赖注入**：FastAPI 的 Depends 注入数据库会话和当前用户
3. **单一职责**：每个文件专注于特定功能
4. **代码复用**：PostIt 等组件被多个页面复用
5. **数据验证**：schemas.py 统一管理数据验证逻辑

这种架构设计使得代码易于维护、测试和扩展，前后端通过 RESTful API 进行通信，实现了良好的关注点分离。
